<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>New strategy objects — strategy_maic • outstandR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="New strategy objects — strategy_maic"><meta name="description" content="Create a type of strategy class for each modelling approach."><meta property="og:description" content="Create a type of strategy class for each modelling approach."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">outstandR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Binary_data_example.html">Binary data example</a></li>
    <li><a class="dropdown-item" href="../articles/Binary_data_Remiro-Azocar.html">Binary data example usind data from Remiro-Azocar et al. (2020)</a></li>
    <li><a class="dropdown-item" href="../articles/comparison-with-other-packages.html">Comparison with other packages</a></li>
    <li><a class="dropdown-item" href="../articles/Continuous_data_example.html">Continuous data example</a></li>
    <li><a class="dropdown-item" href="../articles/Count_data_example.html">Count data example</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StatisticsHealthEconomics/outstandR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>New strategy objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/StatisticsHealthEconomics/outstandR/blob/HEAD/R/strategy_.R" class="external-link"><code>R/strategy_.R</code></a></small>
      <div class="d-none name"><code>strategy.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a type of strategy class for each modelling approach.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">strategy_maic</span><span class="op">(</span>formula <span class="op">=</span> <span class="cn">NULL</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span>, R <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">strategy_stc</span><span class="op">(</span>formula <span class="op">=</span> <span class="cn">NULL</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">strategy_gcomp_ml</span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span>,</span>
<span>  R <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  N <span class="op">=</span> <span class="fl">1000</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">strategy_gcomp_stan</span><span class="op">(</span>formula <span class="op">=</span> <span class="cn">NULL</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">strategy_mim</span><span class="op">(</span>formula <span class="op">=</span> <span class="cn">NULL</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">gaussian</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">new_strategy</span><span class="op">(</span><span class="va">strategy</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>Linear regression <code>formula</code> object</p></dd>


<dt id="arg-family">family<a class="anchor" aria-label="anchor" href="#arg-family"></a></dt>
<dd><p><code>family</code> object from the <code>stats</code> library</p></dd>


<dt id="arg-r">R<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>The number of resamples used for the non-parametric bootstrap</p></dd>


<dt id="arg-n">N<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Synthetic sample size for g-computation</p></dd>


<dt id="arg-strategy">strategy<a class="anchor" aria-label="anchor" href="#arg-strategy"></a></dt>
<dd><p>Class name from <code>strategy_maic</code>, <code>strategy_stc</code>, <code>strategy_gcomp_ml</code>, <code>strategy_gcomp_stan</code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>maic</code> class object</p>
<p><code>stc</code> class object</p>
<p><code>gcomp_ml</code> class object</p>
<p><code>gcomp_stan</code> class object</p>
<p><code>mim</code> class object</p>
    </div>
    <div class="section level2">
    <h2 id="matching-adjusted-indirect-comparison-maic-">Matching-adjusted indirect comparison (MAIC)<a class="anchor" aria-label="anchor" href="#matching-adjusted-indirect-comparison-maic-"></a></h2>



<p>MAIC is a form of non-parametric likelihood reweighting method
which allows the propensity score logistic
regression model to be estimated without IPD in the <em>AC</em> population.
The mean outcomes \(\mu_{t(AC)}\) on treatment \(t = A,B\) in the <em>AC</em>
target population are estimated by taking a weighted average of the
outcomes \(Y\) of the \(N\) individuals in arm \(t\) of the <em>AB</em> population.</p>
<p>Used to compare marginal treatment effects where there are cross-trial
differences in effect modifiers and limited patient-level data.</p>
<p>$$
\hat{Y}_{} = \frac{\sum_{i=1}^{N} Y_{it(AB)} w_{it}}{\sum_{i=1}^{N} w_{it}}
$$
where the weight \(w_{it}\) assigned to the \(i\)-th individual receiving treatment
\(t\) is equal to the odds of being enrolled in the <em>AC</em> trial vs the <em>AB</em> trial.</p>
    </div>
    <div class="section level2">
    <h2 id="simulated-treatment-comparison-stc-">Simulated treatment comparison (STC)<a class="anchor" aria-label="anchor" href="#simulated-treatment-comparison-stc-"></a></h2>


<p>Outcome regression-based method which targets a conditional treatment effect.
STC is a modification of the covariate adjustment method.
An outcome model is fitted using IPD in the <em>AB</em> trial</p>
<p>$$
g(\mu_{t(AB)}(X)) = \beta_0 + \beta_1^T X + (\beta_B + \beta_2^T X^{EM}) I(t=B)
$$
where \(\beta_0\) is an intercept term, \(\beta_1\) is a vector of coefficients for
prognostic variables, \(\beta_B\) is the relative effect of treatment <em>B</em> compared
to <em>A</em> at \(X=0\), \(\beta_2\) is a vector of coefficients for effect
modifiers \(X^{EM}\) subvector of the full covariate vector \(X\)), and
\(\mu_{t(AB)}(X)\) is the expected outcome of an individual assigned
treatment \(t\) with covariate values \(X\) which is transformed onto a
chosen linear predictor scale with link function \(g(\cdot)\).</p>
    </div>
    <div class="section level2">
    <h2 id="g-computation-maximum-likelihood">G-computation maximum likelihood<a class="anchor" aria-label="anchor" href="#g-computation-maximum-likelihood"></a></h2>



<p>G-computation marginalizes the conditional estimates by separating the regression modelling
from the estimation of the marginal treatment effect for <em>A</em> versus <em>C</em>.
First, a regression model of the observed outcome \(y\) on the covariates \(x\) and treatment \(z\) is fitted to the <em>AC</em> IPD:</p>
<p>$$
g(\mu_n) = \beta_0 + \boldsymbol{x}_n \boldsymbol{\beta_1} + (\beta_z + \boldsymbol{x_n^{EM}} \boldsymbol{\beta_2}) \mbox{I}(z_n=1)
$$
In the context of G-computation, this regression model is often called the “Q-model.”
Having fitted the Q-model, the regression coefficients are treated as nuisance parameters.
The parameters are applied to the simulated covariates \(x*\) to predict hypothetical outcomes
for each subject under both possible treatments. Namely, a pair of predicted outcomes,
also called potential outcomes, under <em>A</em> and under <em>C</em>, is generated for each subject.</p>
<p>By plugging treatment <em>C</em> into the regression fit for every simulated observation,
we predict the marginal outcome mean in the hypothetical scenario in which all units are under treatment <em>C</em>:</p>
<p>$$
\hat{\mu}_0 = \int_{x^*} g^{-1} (\hat{\beta}_0 + x^* \hat{\beta}_1 ) p(x^*) dx^*
$$
To estimate the marginal or population-average treatment effect for <em>A</em> versus <em>C</em> in the linear predictor scale,
one back-transforms to this scale the average predictions, taken over all subjects on the natural outcome scale,
and calculates the difference between the average linear predictions:</p>
<p>$$
\hat{\Delta}^{(2)}_{10} = g(\hat{\mu}_1) - g(\hat{\mu}_0)
$$</p>
    </div>
    <div class="section level2">
    <h2 id="g-computation-bayesian">G-computation Bayesian<a class="anchor" aria-label="anchor" href="#g-computation-bayesian"></a></h2>


<p>The difference between Bayesian G-computation and its maximum-likelihood
counterpart is in the estimated distribution of the predicted outcomes. The
Bayesian approach also marginalizes, integrates or standardizes over the
joint posterior distribution of the conditional nuisance parameters of the
outcome regression, as well as the joint covariate distribution.</p>
<p>Draw a vector of size \(N*\) of predicted outcomes \(y*z\) under each set
intervention \(z* \in \{0, 1\}\) from its posterior predictive distribution
under the specific treatment. This is defined as \(p(y*_{z*} |
\mathcal{D}_{AC}) = \int_{\beta} p(y*_{z*} | \beta) p(\beta | \mathcal{D}_{AC}) d\beta\)
where \(p(\beta | \mathcal{D}_{AC})\) is the
posterior distribution of the outcome regression coefficients \(\beta\),
which encode the predictor-outcome relationships observed in the <em>AC</em> trial IPD.</p>
<p>This is given by:</p>
<p>$$
p(y*_{z*} \mid \mathcal{D}_{AC}) = \int_{x*} p(y* \mid z*, x*, \mathcal{D}_{AC}) p(x* \mid \mathcal{D}_{AC}) dx*
$$</p>
<p>$$
= \int_{x*} \int_{\beta} p(y* \mid z*, x*, \beta) p(x* \mid \beta) p(\beta \mid \mathcal{D}_{AC}) d\beta dx*
$$
In practice, the integrals above can be approximated numerically, using full Bayesian
estimation via Markov chain Monte Carlo (MCMC) sampling.</p>
    </div>
    <div class="section level2">
    <h2 id="multiple-imputation-marginalization-mim-">Multiple imputation marginalization (MIM)<a class="anchor" aria-label="anchor" href="#multiple-imputation-marginalization-mim-"></a></h2>



    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Nathan Green, Antonio Remiro-Azocar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

